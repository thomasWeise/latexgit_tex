\documentclass{article}%
\usepackage{latexgit}% use our package
\usepackage{xcolor}% to be able to use colors
\usepackage[colorlinks]{hyperref}%  for printing the URL
\usepackage{listings}% importing external code
\lstset{language=Python,basicstyle=\small\ttfamily,%
keywordstyle=\ttfamily\color{teal!90!black}\bfseries,%
identifierstyle=,commentstyle=\color{gray}\footnotesize,%
stringstyle=\ttfamily\color{red!90!black},%
numbers=left,numberstyle=\tiny,frame=shadowbox,frameround=tttt,%
backgroundcolor=\color{black!10!yellow!5!white}}%
%
\gdef\moptipySrc#1#2#3{%
\gitLoad{https://github.com/thomasWeise/moptipy}{moptipy/#3}{%
python3 -m latexgit.formatters.python --labels book}%
\lstinputlisting[float,label={#1},caption={#2~(\href{\gitUrl}{src})}]{\gitFile}}
%
\begin{document}%
%
Behold the beautiful \autoref{a} and \autoref{b}.%
%
\moptipySrc{a}{Randomized Sampling}{algorithms/random_sampling.py}
\moptipySrc{b}{Randomized Local Search}{algorithms/so/rls.py}
%
\end{document}%
